\ProvidesPackage{color-env}[2020/10/31 color-env]

%%%%%%%%%%%%%%%%
% Requirements %
%%%%%%%%%%%%%%%%

\RequirePackage{xcolor}
\RequirePackage{graphicx}
\RequirePackage[framemethod=TikZ]{mdframed}  %% for colored framed boxes
\RequirePackage{framed}  %% for problem 
\RequirePackage{amsthm}  %% for theorem environment 

%%%%%%%%%%%%%%%%%%
%  Environments  %
%%%%%%%%%%%%%%%%%%

%%%%%%%% Problem %%%%%%%%%%%%%
\newtheorem{prob}{Feladat}[chapter]
\newenvironment{problem}
{\colorlet{shadecolor}{orange!12}\begin{shaded}\begin{prob}} 
		{\end{prob}\end{shaded}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%% ExtraProblem %%%%%%%%%%%%%
\newenvironment{extraproblem}
{\colorlet{shadecolor}{red!12}\begin{shaded}\begin{prob}} 
		{\end{prob}\end{shaded}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%% THEOREM %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcounter{theo}[section] \setcounter{theo}{0} %% counter
\renewcommand{\thetheo}{\arabic{chapter}.\arabic{theo}}
\newenvironment{theorem}[2][]{%
	\refstepcounter{theo}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=blue!20]
				{\strut \thetheo.~Tétel};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=blue!20]
				{\strut \thetheo.~Tétel~(#1)};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=blue!20,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}
%%%%%%%%%%%%%%% LEMMA %%%%%%%%%%%%%%%
\newcounter{lem}[section]\setcounter{lem}{0}
\renewcommand{\thelem}{\arabic{chapter}.\arabic{lem}}
\newenvironment{lemma}[2][]{%
	\refstepcounter{lem}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=orange!20]
				{\strut \thelem.~Lemma};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=orange!20]
				{\strut \thelem.~Lemma~(#1)};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=orange!20,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%% DEFINITION %%%%%%%%%%%%%%%
\newcounter{def}[section]\setcounter{def}{0}
\renewcommand{\thedef}{\arabic{chapter}.\arabic{def}}
\newenvironment{definition}[2][]{%
	\refstepcounter{def}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=red!25]
				{\strut \thedef.~Meghatározás};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=red!25]
				{\strut \thedef.~Meghatározás~(#1)};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=red!25,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}
%%%%%%%%%%%%%% COROLLARY %%%%%%%%%%%%%%%%%%
\newcounter{cor}[section]\setcounter{cor}{0}
\renewcommand{\thecor}{\arabic{chapter}.\arabic{cor}}
\newenvironment{corollary}[2][]{%
	\refstepcounter{cor}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=yellow!20]
				{\strut \thecor.~Következmény};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=yellow!20]
				{\strut \thecor.~Következmény~(#1)};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=yellow!20,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}

%%%%%%%%%%%%% PROPOSITIONS %%%%%%%%%%%%%%%%%%%
\newcounter{prop}[section]\setcounter{prop}{0}
\renewcommand{\theprop}{\arabic{chapter}.\arabic{prop}}
\newenvironment{proposition}[2][]{%
	\refstepcounter{prop}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=green!25]
				{\strut \theprop.~Állítás};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=green!25]
				{\strut \theprop.~Állítás~(#1)};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=green!25,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[]\relax%
        \label{#2}}{\end{mdframed}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\expandafter\let\expandafter\oldproof\csname\string\proof\endcsname
\let\oldendproof\endproof
\renewenvironment{proof}[1][\proofname]{%
	\oldproof[\bf \scshape #1]%
}{\oldendproof}
\renewcommand\qedsymbol{$\blacksquare$}  %% optional if you like it.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\newenvironment{solution}
{\renewcommand\qedsymbol{$\blacksquare$}\begin{proof}[Megoldás]}
{\end{proof}}

\newenvironment{example}
{\renewcommand{\qedsymbol}{}\colorlet{shadecolor}{green!12}\begin{shaded}\begin{proof}[Példa]}
	{\end{proof}\end{shaded}}

\newenvironment{rem}
{\renewcommand{\qedsymbol}{}\begin{proof}[Megjegyzés]}
	{\end{proof}}


